Metadata-Version: 2.4
Name: language-mcp
Version: 0.1.0
Summary: A language analysis MCP server with background AST and documentation analysis
License: MIT
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Requires-Python: >=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: mcp>=1.0.0
Requires-Dist: uvicorn>=0.30.0
Requires-Dist: aiofiles>=24.1.0
Requires-Dist: watchfiles>=0.24.0
Provides-Extra: dev
Requires-Dist: pytest>=8.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.24.0; extra == "dev"
Requires-Dist: black>=24.0.0; extra == "dev"
Requires-Dist: ruff>=0.6.0; extra == "dev"
Dynamic: license-file

# Language MCP

A Model Context Protocol (MCP) server for language analysis with background AST processing and documentation reading. This server runs as a live HTTP service and automatically analyzes code changes in real-time.

## Features

- **Background Analysis**: AST analysis and documentation reading run in the background automatically
- **File Watching**: Automatically detects and analyzes file changes
- **Symbol Extraction**: Get functions, classes, methods, and variables from your codebase
- **Dependency Analysis**: View import dependencies and build dependency trees
- **Documentation Parsing**: Parse and search Markdown and RST documentation files
- **HTTP Transport**: Runs as a live HTTP server with SSE support

## Installation

```bash
# Clone the repository
git clone https://github.com/ivikasavnish/language-mcp.git
cd language-mcp

# Install dependencies
pip install -e .

# Or install with development dependencies
pip install -e ".[dev]"
```

## Usage

### Starting the Server

```bash
# Start the server on default port 8080
language-mcp

# Start on a custom port
language-mcp --port 9000

# Start with initial projects
language-mcp --project /path/to/project1 --project /path/to/project2
```

### Available Tools

Once the server is running, you can use the following MCP tools:

#### `add_project`
Add a project directory to be analyzed. Analysis runs automatically in the background.

```json
{
  "path": "/path/to/project",  // Use "." for current directory
  "name": "my-project"         // Optional project name
}
```

#### `remove_project`
Remove a project from analysis.

```json
{
  "path": "/path/to/project"
}
```

#### `list_projects`
List all registered projects and their analysis status.

#### `get_symbols`
Get all symbols (functions, classes, variables) from a project.

```json
{
  "path": "/path/to/project",
  "kind": "function",     // Optional: filter by kind (function, class, method, variable, all)
  "search": "user"        // Optional: search term to filter symbols
}
```

#### `get_dependencies`
Get all import dependencies from a project.

```json
{
  "path": "/path/to/project",
  "external_only": true   // Optional: only show external dependencies
}
```

#### `get_dependency_tree`
Get the dependency tree showing relationships between files and modules.

```json
{
  "path": "/path/to/project"
}
```

#### `get_docs`
Get documentation files and their structure.

```json
{
  "path": "/path/to/project",
  "file": "README.md"     // Optional: get specific file content
}
```

#### `search_docs`
Search documentation for a query string.

```json
{
  "path": "/path/to/project",
  "query": "installation",
  "case_sensitive": false
}
```

#### `refresh_project`
Force a full re-analysis of a project.

```json
{
  "path": "/path/to/project"
}
```

#### `get_symbol_info`
Get detailed information about a specific symbol.

```json
{
  "path": "/path/to/project",
  "name": "MyClass"
}
```

## MCP Configuration

Add to your MCP settings (e.g., in VS Code or Claude Desktop):

```json
{
  "mcpServers": {
    "language-mcp": {
      "command": "language-mcp",
      "args": ["--port", "8080"],
      "env": {}
    }
  }
}
```

Or for HTTP/SSE transport:

```json
{
  "mcpServers": {
    "language-mcp": {
      "url": "http://localhost:8080/sse"
    }
  }
}
```

## API Endpoints

- `GET /health` - Health check endpoint
- `GET /sse` - SSE endpoint for MCP communication
- `POST /messages/` - Message handling endpoint

## Development

```bash
# Install development dependencies
pip install -e ".[dev]"

# Run tests
pytest

# Format code
black src tests

# Lint code
ruff check src tests
```

## Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                    Language MCP Server                       │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐  │
│  │   HTTP/SSE  │  │    Tools    │  │  Background Worker  │  │
│  │  Transport  │◄─┤   Handler   │◄─┤                     │  │
│  └─────────────┘  └─────────────┘  │  ┌───────────────┐  │  │
│                                     │  │  File Watcher │  │  │
│                                     │  └───────────────┘  │  │
│                                     │                     │  │
│                                     │  ┌───────────────┐  │  │
│                                     │  │ AST Analyzer  │  │  │
│                                     │  └───────────────┘  │  │
│                                     │                     │  │
│                                     │  ┌───────────────┐  │  │
│                                     │  │  Doc Reader   │  │  │
│                                     │  └───────────────┘  │  │
│                                     └─────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

## License

MIT License
